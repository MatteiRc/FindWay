{"ast":null,"code":"var _jsxFileName = \"/home/raphael/Desktop/findway/frontend-tcc/src/contexto.js\";\nimport React, { Component } from 'react';\nimport { servicos, detalheServico } from './data.js';\nimport axios from 'axios';\nconst ServicoContexto = React.createContext();\n\nclass ProvedorServico extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      servicos: [],\n      detalheServico: detalheServico,\n      favorito: []\n    };\n\n    this.setServicos = servico => {\n      let servic = [];\n      servico.forEach(item => {\n        const singleItem = { ...item\n        };\n        servic = [...servic, singleItem];\n      });\n      this.setState(() => {\n        return {\n          servicos: servic\n        };\n      });\n    };\n\n    this.handleDetalhe = id => {\n      const servico = this.getItem(id);\n      this.setState(() => {\n        return {\n          detalheServico: servico\n        };\n      });\n    };\n\n    this.addToFavoritos = id => {\n      let tempProducts = [...this.state.servicos];\n      const index = tempProducts.indexOf(this.getItem(id));\n      const servico = tempProducts[index];\n      servico.favorito = true;\n      servico.cont = 1;\n      const preco = servico.preco;\n      servico.total = preco;\n      this.setState(() => {\n        return {\n          servico: tempProducts,\n          favorito: [...this.state.favorito, servico]\n        };\n      }, () => {\n        console.log(this.state);\n      });\n    };\n\n    this.getItem = id => {\n      const product = this.state.servicos.find(item => item.id === id);\n      return product;\n    };\n\n    this.removeItem = id => {\n      console.log('remove');\n      let tempServicos = [...this.state.servicos];\n      let tempFavorito = [...this.state.favorito];\n      tempFavorito = tempFavorito.filter(item => item.id !== id);\n      const index = tempServicos.indexOf(this.getItem(id));\n      let removeServico = tempServicos[index];\n      removeServico.favorito = false;\n      this.setState(() => {\n        return {\n          favorito: [...tempFavorito],\n          servicos: [...tempServicos]\n        };\n      });\n    };\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:3001/anuncios').then(res => {\n      let arr = new Array();\n      let data = JSON.parse(JSON.stringify(res.data));\n\n      for (let i = 0; i < data.length; i++) {\n        let servico = {\n          id: data[i].id,\n          titulo: data[i].titulo,\n          img: \"http://localhost:3001/\" + data[i].imagem,\n          preco: data[i].valor + '/hora',\n          nome: data[i].usuario,\n          info: data[i].descricao,\n          horario: data[i].horarios,\n          cidade: data[i].cidade,\n          classificacao: data[i].classificacao / data[i].total,\n          favorito: false\n        };\n        arr.push(servico);\n      }\n\n      this.setServicos(arr);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(ServicoContexto.Provider, {\n      value: { ...this.state,\n        handleDetalhe: this.handleDetalhe,\n        addToFavoritos: this.addToFavoritos,\n        removeItem: this.removeItem\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, this.props.children);\n  }\n\n}\n\nconst ConsumidorServico = ServicoContexto.Consumer;\nexport { ProvedorServico, ConsumidorServico };","map":{"version":3,"sources":["/home/raphael/Desktop/findway/frontend-tcc/src/contexto.js"],"names":["React","Component","servicos","detalheServico","axios","ServicoContexto","createContext","ProvedorServico","state","favorito","setServicos","servico","servic","forEach","item","singleItem","setState","handleDetalhe","id","getItem","addToFavoritos","tempProducts","index","indexOf","cont","preco","total","console","log","product","find","removeItem","tempServicos","tempFavorito","filter","removeServico","componentDidMount","get","then","res","arr","Array","data","JSON","parse","stringify","i","length","titulo","img","imagem","valor","nome","usuario","info","descricao","horario","horarios","cidade","classificacao","push","render","props","children","ConsumidorServico","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {servicos, detalheServico} from './data.js';\nimport axios from 'axios';\nconst ServicoContexto = React.createContext();\n\nclass ProvedorServico extends Component {\n    state ={\n        servicos: [],\n        detalheServico: detalheServico,\n        favorito: []\n    };\n    \n    componentDidMount(){\n        axios.get('http://localhost:3001/anuncios')\n        .then(res=>{\n        let arr = new Array();\n        let data = JSON.parse(JSON.stringify(res.data));\n        for(let i = 0; i < data.length; i++){\n            let servico = {\n                id: data[i].id,\n                titulo: data[i].titulo,\n                img: \"http://localhost:3001/\"+data[i].imagem,\n                preco: data[i].valor+'/hora',\n                nome: data[i].usuario,\n                info: data[i].descricao,\n                horario: data[i].horarios, \n                cidade: data[i].cidade,\n                classificacao: (data[i].classificacao/data[i].total),\n                favorito: false\n            };\n            arr.push(servico);\n        }                                                    \n        this.setServicos(arr);\n    })\n    }\n    setServicos = (servico) => {\n        let servic = [];\n        servico.forEach(item =>{\n            const singleItem = {...item};\n            servic = [...servic, singleItem];\n\n        });\n        this.setState(()=>{\n            return {servicos:servic};\n        });\n    };\n    handleDetalhe = (id) => {\n        const servico = this.getItem(id);\n        this.setState(()=>{\n            return {detalheServico:servico}\n        })\n    };\n    addToFavoritos = (id)=>{\n        let tempProducts = [...this.state.servicos];\n        const index = tempProducts.indexOf(this.getItem(id));\n        const servico = tempProducts[index];\n        servico.favorito = true;\n        servico.cont = 1;\n        const preco = servico.preco;\n        servico.total = preco;\n        this.setState(()=>{\n            return { servico:tempProducts, favorito:[...this.state.favorito, servico] }; \n        }, ()=>{console.log(this.state)});\n    };\n    getItem = (id) =>{\n        const product = this.state.servicos.find(item => item.id === id);\n        return product;\n    };\n    removeItem = (id) =>{\n        console.log('remove');\n        let tempServicos = [...this.state.servicos];\n        let tempFavorito = [...this.state.favorito];\n        tempFavorito = tempFavorito.filter(item => item.id !== id);\n        const index = tempServicos.indexOf(this.getItem(id));\n        let removeServico = tempServicos[index];\n        removeServico.favorito = false;\n        this.setState(()=>{\n            return {\n                favorito: [...tempFavorito],\n                servicos:[...tempServicos]\n            }\n        })\n    };\n    render() {\n        return (\n            <ServicoContexto.Provider value={{\n                ...this.state,\n                handleDetalhe: this.handleDetalhe,\n                addToFavoritos: this.addToFavoritos,\n                removeItem: this.removeItem\n            }}>\n                {this.props.children}\n            </ServicoContexto.Provider>\n        );\n    }\n}\n\nconst ConsumidorServico = ServicoContexto.Consumer;\n\nexport {ProvedorServico, ConsumidorServico}\n"]},"metadata":{},"sourceType":"module"}