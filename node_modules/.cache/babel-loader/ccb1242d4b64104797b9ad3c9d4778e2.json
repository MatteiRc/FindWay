{"ast":null,"code":"var _jsxFileName = \"/home/raphael/Desktop/findway/frontend-tcc/src/components/EditarServico.js\";\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { ConsumidorServico } from '../contexto.js';\nimport { ButtonFavorito } from './Button.js';\nimport propTypes from 'prop-types';\nimport \"../styles/servicos.css\";\nimport Axios from 'axios';\nconst baseUrl = \"http://localhost:3001/updateAnuncio\";\nconst InitialState = {\n  anuncio: {\n    titulo: \"\",\n    cidade: \"\",\n    descricao: \"\",\n    horarios: \"\",\n    valor: \"\",\n    imagem: \"\"\n  },\n  idUsuario: \"\",\n  isInvalid: false,\n  saved: false,\n  isEmpty: false\n};\nexport default class Servico extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...InitialState\n    };\n  }\n\n  componentDidMount() {\n    Axios.get('http://localhost:3001/anuncioUsuario/' + localStorage.getItem(\"id_servico\")).then(res => {\n      let anuncio = {\n        titulo: res.data.titulo,\n        cidade: res.data.cidade,\n        descricao: res.data.descricao,\n        horarios: res.data.horarios,\n        valor: res.data.valor,\n        imagem: \"\"\n      };\n      this.setState({\n        anuncio: anuncio\n      });\n      console.log(this.state);\n    }).catch(error => {\n      alert(\"não foi possivél resgatar o serviço\");\n    });\n  }\n\n  save(event) {\n    event.preventDefault();\n    const url = baseUrl + \"/\" + window.localStorage.getItem(\"id_servico\");\n    const data = new FormData();\n    data.append(\"file\", this.state.anuncio.imagem);\n    data.append(\"cidade\", this.state.anuncio.cidade);\n    data.append(\"descricao\", this.state.anuncio.descricao);\n    data.append(\"horarios\", this.state.anuncio.horarios);\n    data.append(\"valor\", this.state.anuncio.valor);\n    data.append(\"titulo\", this.state.anuncio.titulo);\n    Axios.post(url, data).then(res => {\n      console.log(res);\n      window.localStorage.removeItem(\"id_servico\");\n      window.location.href = \"http://localhost:3000/listaservicos\";\n    });\n  }\n\n  updateField(event) {\n    const anuncio = { ...this.state.anuncio\n    };\n    let isEmpty = false;\n    anuncio[event.target.name] = event.target.value;\n    if (anuncio.cidade == \"\" || anuncio.descricao == \"\" || anuncio.horarios == \"\" || anuncio.valor == \"\" || anuncio.titulo == \"\") isEmpty = true;\n    this.setState({\n      anuncio,\n      isEmpty\n    });\n    console.log(this.state.anuncio);\n  }\n\n  delete(event) {\n    event.preventDefault();\n    if (window.confirm(\"Deseja excluir esta serviço?\")) Axios.post(\"http://localhost:3001/deletarAnuncio/\" + localStorage.getItem(\"id_servico\")).then(res => {\n      alert(\"Serviço excluido com sucesso\");\n      window.location.href = \"http://localhost:3000/listaservicos\";\n    }).catch(error => {\n      alert(\"Não foi possivel excluir o Serviço\");\n      window.location.href = \"http://localhost:3000/listaservicos\";\n    });\n  }\n\n  displayImg(event) {\n    let img = document.getElementById(\"foto\");\n    img.src = URL.createObjectURL(event.target.files[0]);\n  }\n\n  fileSelect(event) {\n    const anuncio = { ...this.state.anuncio\n    };\n    anuncio[event.target.name] = event.target.files[0];\n    this.setState({\n      anuncio\n    });\n    this.displayImg(event);\n    console.log(anuncio.imagem);\n  }\n\n  renderForm() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      method: \"POST\",\n      onSubmit: e => this.save(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      method: \"get\",\n      action: \"/listaservicos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-arrow-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    })), \"Voltar\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"titulo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, \"Titulo do Servi\\xE7o\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"titulo\",\n      id: \"titulo\",\n      value: this.state.anuncio.titulo,\n      onChange: e => this.updateField(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"cidade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, \"Cidade\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"cidade\",\n      id: \"cidade\",\n      value: this.state.anuncio.cidade,\n      onChange: e => this.updateField(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"descricao\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \"Descri\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"textarea\", {\n      type: \"text\",\n      name: \"descricao\",\n      id: \"descricao\",\n      value: this.state.anuncio.descricao,\n      onChange: e => this.updateField(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"horarios\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, \"Hor\\xE1rios dispon\\xEDveis\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"horarios\",\n      id: \"horarios\",\n      value: this.state.anuncio.horarios,\n      onChange: e => this.updateField(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"Number area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"valor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, \"Valor do servi\\xE7o/hora\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"valor\",\n      name: \"valor\",\n      min: \"0\",\n      max: \"100000\",\n      step: \"0.01\",\n      value: this.state.anuncio.valor,\n      onChange: e => this.updateField(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"File\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"imagem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, \"Est\\xE1 insatisfeito com a foto ? Pode alter\\xE1-la quando quiser !\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"imagem\",\n      id: \"imagem\",\n      accept: \"imagem/*\",\n      onChange: e => this.fileSelect(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      id: \"foto\",\n      width: \"100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"Button area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"cadastrarservico\",\n      type: \"submit\",\n      disabled: this.state.isEmpty,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, \"Atualizar Servi\\xE7o\"), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"cadastrarservico\",\n      onClick: e => this.delete(e),\n      disabled: this.state.isEmpty,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, \"Deletar Servi\\xE7o\"))));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, this.renderForm()));\n  }\n\n}","map":{"version":3,"sources":["/home/raphael/Desktop/findway/frontend-tcc/src/components/EditarServico.js"],"names":["React","Component","styled","Link","ConsumidorServico","ButtonFavorito","propTypes","Axios","baseUrl","InitialState","anuncio","titulo","cidade","descricao","horarios","valor","imagem","idUsuario","isInvalid","saved","isEmpty","Servico","state","componentDidMount","get","localStorage","getItem","then","res","data","setState","console","log","catch","error","alert","save","event","preventDefault","url","window","FormData","append","post","removeItem","location","href","updateField","target","name","value","delete","confirm","displayImg","img","document","getElementById","src","URL","createObjectURL","files","fileSelect","renderForm","e","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport {Link} from 'react-router-dom';\nimport {ConsumidorServico} from '../contexto.js'; \nimport {ButtonFavorito} from './Button.js';\nimport propTypes from 'prop-types';\nimport \"../styles/servicos.css\"\nimport Axios from 'axios';\n\nconst baseUrl = \"http://localhost:3001/updateAnuncio\";\nconst InitialState ={\n    anuncio:{titulo:\"\",\n    cidade:\"\",\n    descricao:\"\",\n    horarios:\"\",\n    valor:\"\",\n    imagem:\"\"},\n    idUsuario:\"\",\n    isInvalid: false,\n    saved: false,\n    isEmpty:false\n}\n\n\n\n\nexport default class Servico extends Component{\n     state = {...InitialState};\n       \n     \n     componentDidMount(){\n        Axios.get('http://localhost:3001/anuncioUsuario/'+localStorage.getItem(\"id_servico\")).then(res=>{\n            let anuncio = {\n                titulo:res.data.titulo,\n                cidade: res.data.cidade,\n                descricao: res.data.descricao,\n                horarios: res.data.horarios,\n                valor: res.data.valor,\n                imagem: \"\"\n            }\n            this.setState({anuncio:anuncio});\n            console.log(this.state);\n        }).catch(error =>{\n            alert(\"não foi possivél resgatar o serviço\");\n        })\n    }\n\n     save(event){\n         event.preventDefault();\n         const url = baseUrl + \"/\" + window.localStorage.getItem(\"id_servico\");\n         const data = new FormData();\n         data.append(\"file\",this.state.anuncio.imagem);\n         data.append(\"cidade\",this.state.anuncio.cidade);\n         data.append(\"descricao\",this.state.anuncio.descricao);\n         data.append(\"horarios\",this.state.anuncio.horarios);\n         data.append(\"valor\",this.state.anuncio.valor);\n         data.append(\"titulo\",this.state.anuncio.titulo);\n         Axios.post(url,data).then(res=>{\n             console.log(res);\n             window.localStorage.removeItem(\"id_servico\");\n             window.location.href = \"http://localhost:3000/listaservicos\";\n\n         })\n\n     }\n\n     updateField(event){\n         const anuncio = {...this.state.anuncio};\n         let isEmpty = false;\n         anuncio[event.target.name] = event.target.value;\n         if(anuncio.cidade == \"\" || anuncio.descricao == \"\" || anuncio.horarios == \"\" || anuncio.valor == \"\" || anuncio.titulo == \"\")\n             isEmpty = true;\n             this.setState({anuncio,isEmpty});\n             console.log(this.state.anuncio);\n\n        }\n\n        delete(event){\n            event.preventDefault();\n            if(window.confirm(\"Deseja excluir esta serviço?\"))\n            Axios.post(\"http://localhost:3001/deletarAnuncio/\"+localStorage.getItem(\"id_servico\")).then(res=>{\n                alert(\"Serviço excluido com sucesso\");\n                window.location.href = \"http://localhost:3000/listaservicos\";\n            }).catch(error => {alert(\"Não foi possivel excluir o Serviço\");\n            window.location.href = \"http://localhost:3000/listaservicos\";})\n        }\n\n     displayImg(event){\n         let img = document.getElementById(\"foto\");\n         img.src = URL.createObjectURL(event.target.files[0]);\n\n     }\n\n     fileSelect(event){\n         const anuncio = {... this.state.anuncio};\n         anuncio[event.target.name] = event.target.files[0];\n         this.setState({anuncio});\n         this.displayImg(event);\n         console.log(anuncio.imagem);\n     }\n\n     renderForm(){\n         return(\n            <form method = \"POST\" onSubmit = {e => this.save(e)}>\n                <form method=\"get\" action=\"/listaservicos\">\n                    <button>\n                    <span className=\"mr-2\">\n                        <i className=\"fas fa-arrow-left\"></i>\n                    </span>\n                        Voltar\n                    </button>\n                </form>\n                <div class = \"form\">\n                <div class = \"input area\">\n                <label for = \"titulo\">Titulo do Serviço</label>\n                <br/>\n                <input type = \"text\" name = \"titulo\" id = \"titulo\" value ={this.state.anuncio.titulo} onChange ={e => this.updateField(e)}/>\n                </div>\n                <div class = \"input area\">\n                <label for = \"cidade\">Cidade</label>\n                <br/>\n                <input type = \"text\" name = \"cidade\" id=\"cidade\" value = {this.state.anuncio.cidade} onChange = {e =>this.updateField(e)}/>\n                </div>\n                <div class = \"input area\">\n                <br/>\n                <label for = \"descricao\">Descrição</label>\n                <br/>\n                <textarea type = \"text\" name = \"descricao\" id = \"descricao\" value = {this.state.anuncio.descricao} onChange = {e => this.updateField(e)}/>\n                </div>\n                <div class = \"input area\">\n                <br/>\n                <label for = \"horarios\">Horários disponíveis</label>\n                <br/>\n                <input type = \"text\" name = \"horarios\" id = \"horarios\" value ={this.state.anuncio.horarios} onChange = {e => this.updateField(e)}/>\n                </div>\n                <div class = \"Number area\">\n                <br/>\n                <label for = \"valor\">Valor do serviço/hora</label>\n                <br/>\n                <input type = \"number\" id = \"valor\" name = \"valor\" min = \"0\" max = \"100000\"  step = \"0.01\" value = {this.state.anuncio.valor} onChange ={e => this.updateField(e)}/>\n                </div>\n                <div class = \"File\">\n                <br/>\n                <label for = \"imagem\">Está insatisfeito com a foto ? Pode alterá-la quando quiser !</label>\n                <input type = \"file\" name=\"imagem\" id=\"imagem\" accept = \"imagem/*\" onChange ={ e => this.fileSelect(e) }/>\n                <br/>\n                <img id=\"foto\" width = \"100\"/>\n                <br/>\n                </div>\n                <div class = \"Button area\">\n                <button id = \"cadastrarservico\" type = \"submit\" disabled = {this.state.isEmpty}>Atualizar Serviço</button>\n                <button id = \"cadastrarservico\" onClick = {e => this.delete(e)} disabled = {this.state.isEmpty}>Deletar Serviço</button>\n                </div>\n            </div>\n             </form>\n         )\n     }\n    \n    \n    \n    \n    \n    \n    render(){\n         return(\n             <div class = \"wrapper\">\n                <div class= \"form-wrapper\">\n                {this.renderForm()}\n                </div>\n            </div>            \n         )\n     }\n\n\n}"]},"metadata":{},"sourceType":"module"}